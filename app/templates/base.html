<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CME AI Concierge</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script>
      (function () {
        var storageKey = "cme-theme";
        var storedTheme = null;
        try {
          storedTheme = window.localStorage.getItem(storageKey);
        } catch (err) {
          storedTheme = null;
        }
        var prefersDark = false;
        try {
          prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
        } catch (err) {
          prefersDark = false;
        }
        var initialTheme = storedTheme || (prefersDark ? "dark" : "light");
        document.documentElement.setAttribute("data-theme", initialTheme);
        document.documentElement.classList.add("theme-" + initialTheme);
      })();
    </script>
    <link rel="stylesheet" href="/static/style.css" />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  </head>
  <body>
    <main class="app-root">
      {% block content %}{% endblock %}
    </main>
    <script>
      (function () {
        var storageKey = "cme-theme";
        var current =
          document.documentElement.getAttribute("data-theme") || "light";
        function applyTheme(theme) {
          current = theme;
          document.documentElement.setAttribute("data-theme", theme);
          document.body.setAttribute("data-theme", theme);
          document.documentElement.classList.remove("theme-light", "theme-dark");
          document.body.classList.remove("theme-light", "theme-dark");
          document.documentElement.classList.add("theme-" + theme);
          document.body.classList.add("theme-" + theme);
          try {
            window.localStorage.setItem(storageKey, theme);
          } catch (err) {
            /* ignore */
          }
          var toggle = document.getElementById("theme-toggle");
          if (toggle) {
            toggle.setAttribute(
              "aria-label",
              theme === "dark"
                ? "Switch to light theme"
                : "Switch to dark theme"
            );
            toggle.setAttribute("data-theme", theme);
          }
          var icon = document.getElementById("theme-toggle-icon");
          if (icon) {
            icon.textContent = theme === "dark" ? "‚òÄÔ∏è" : "üåô";
          }
        }
        applyTheme(current);
        window.cmeTheme = {
          toggle: function () {
            applyTheme(current === "dark" ? "light" : "dark");
          },
          set: function (theme) {
            applyTheme(theme === "dark" ? "dark" : "light");
          },
        };
        document.addEventListener("DOMContentLoaded", function () {
          var toggle = document.getElementById("theme-toggle");
          if (toggle) {
            toggle.addEventListener("click", function () {
              window.cmeTheme.toggle();
            });
          }
        });
      })();
    </script>
  </body>
</html>
